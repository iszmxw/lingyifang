<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>零壹坊-首页</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="stylesheet" href="css/public/light7.min.css">
    <link rel="stylesheet" href="css/public/swiper.min.css">
    <link rel="stylesheet" href="css/index_new.css">
  </head>
  <body>
    <div class="page page-current">
	    <div class="g-flexview">
			<div class="g-scrollview">
				<div class="head">
						<div class="item_left">
							<span class="address">深圳市</span>
							<span class="back_light"></span>
						</div>
						<div class="item_right">
							<input type="text" name="" placeholder="生活派">
						</div>
				</div>
				<!-- 轮播图 -->
				<div class="guagngao">
					<div class="certify" id="certify">
	                    <div class="img">
	                        <img src="images/V3_banner01@2x.png">
	                    </div>
	                    <div class="img">
	                        <img src="images/V3_banner02@2x.png">
	                    </div>
	                    <div class="img">
	                        <img src="images/V3_banner03@2x.png">
	                    </div>
	                </div>
	            </div>

				<!-- 导航栏按钮 -->
				<div class="nav">
					<a href="javascript:;" class="nav_item">
						<span class="nav_icon">
							<img src="images/jg_bg_01@2x.png">
						</span>
						<p class="nav_title">美食</p>
					</a>
					<a href="javascript:;" class="nav_item">
						<span class="nav_icon">
							<img src="images/jg_bg_02@2x.png">
						</span>
						<p class="nav_title">服饰</p>
					</a>
					<a href="javascript:;" class="nav_item">
						<span class="nav_icon">
							<img src="images/jg_bg_03@2x.png">
						</span>
						<p class="nav_title">超市</p>
					</a>
					<a href="javascript:;" class="nav_item">
						<span class="nav_icon">
							<img src="images/jg_bg_04@2x.png">
						</span>
						<p class="nav_title">休闲娱乐</p>
					</a>
					<a href="javascript:;" class="nav_item">
						<span class="nav_icon">
							<img src="images/jg_bg_10@2x.png">
						</span>
						<p class="nav_title">全部</p>
					</a>
				</div>

				<!-- 滚动轮播新闻 -->
				<div class="news_bg">
					<div class="news_box">
		                <div class="news_icon">
		                    <img src="http://develop2.01nnt.com/api/public/Wechat/images/gzh@2x.png">
		                </div>
		                <div class="scrollText" id="scrollDiv">
		                    <ul>
		                        <li class="news">
		                            <div class="news_item" onclick="window.location='https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz=MzI5ODg3NzYyNw==&scene=126#wechat_redirect'">
		                                <p><font style="font-weight: bold;">零壹坊</font> | 3公里生态圈引领新消费再升级官方公众号前100名关注用户红包入口</p>

		                            </div>
		                            <div class="news_wd">
		                                <img src="http://develop2.01nnt.com/api/public/Wechat/images/ly_logo@2x.png">

		                            </div>
		                        </li>
		                        <li class="news">
		                            <div class="news_item" onclick="window.location='https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz=MzI5ODg3NzYyNw==&scene=126#wechat_redirect'">
		                                <p><font style="font-weight: bold;">3公里研究院</font> | 「明白这个道理 品质生活吃喝玩乐购妥妥的稳了」</p>

		                            </div>
		                            <div class="news_wd">
		                                <img src="http://develop2.01nnt.com/api/public/Wechat/images/index_pic@2x.png">
		                            </div>
		                        </li>
		                    </ul>
		                </div>
	            	</div>
	            </div>
			

				<!-- 热门推荐 -->
				<div class="rmtj_box">
					<div class="tit">
						<div class="bigtit">热门推荐</div>
						<div class="mintit">让你的生活多姿多彩</div>
						<span class="icon_more"></span>
					</div>
					<div class="swiper-container tj_box" id="nav">
					    <div class="swiper-wrapper">
						    <div class="swiper-slide">
						    	<div class="store_img"><img src="images/hc_index@2x.png"></div>
						    </div>
					      	<div class="swiper-slide">
						    	<div class="store_img"><img src="images/hw_index@2x.png"></div>
						    </div>
						    <div class="swiper-slide">
						    	<div class="store_img"><img src="images/cx_index@2x.png"></div>
						    </div>
						    <div class="swiper-slide">
						    	<div class="store_img"><img src="images/cz_index@2x.png"></div>
						    </div>
					    </div>
					</div>
				</div>



				<!-- 商家列表 -->
				<div class="shop_box">
					<div class="shop_top">
						<div class="item"><p class="fujin">附近商家</p></div>
						<div class="item item_right_icon"></div>
					</div>
					<div class="shop_list">
						<div class="shop_list_ul">
							<div class="shop_list_li">
								<div class="shop_left">
									<img src="images/ceshituian.jpg">
								</div>
								<div class="shop_right">
									<a href="javascript:;" class="go_shop_url" onclick="alertMask()"></a>
									<section>
										<p  class="shop_name">希尔顿酒店（福田区）</p>
										<p class="shop_address"><i class="shop_address_icon"></i> 福田区深南大道1003号大中华国际金融中心B座</p>
									</section>
									<section class="right_bottom">
										<p class="shop_luliang"><span>2522粉丝</span>&nbsp;&nbsp;&nbsp;<span>3652 浏览</span></p>
									</section>
								</div>
							</div>
							<div class="shop_list_li">
								<div class="shop_left">
									<img src="images/ceshituian.jpg">
								</div>
								<div class="shop_right">
									<a href="javascript:;" class="go_shop_url" onclick="alertMask()"></a>
									<section>
										<p  class="shop_name">希尔顿酒店（福田区）</p>
										<p class="shop_address"><i class="shop_address_icon"></i> 福田区深南大道1003号大中华国际金融中心B座</p>
									</section>
									<section class="right_bottom">
										<p class="shop_luliang"><span>2522粉丝</span>&nbsp;&nbsp;&nbsp;<span>3652 浏览</span></p>
									</section>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<footer class="f_tabbar">
			    <a href="javascript:;" class="tabbar_item tabbar_action">
			        <span class="tabbar_icon tabbar_icon_shouye">
			        </span>
			        <span class="tabbar-txt">首页</span>
			    </a>
			    <a href="javascript:;" class="tabbar_item">
			        <span class="tabbar_icon tabbar_icon_lianmeng">
			        </span>
			        <span class="tabbar-txt">精选</span>
			    </a>
			    <a href="javascript:;" class="tabbar_item">
			        <span class="tabbar_icon tabbar_icon_tuiguang">
			        </span>
			        <span class="tabbar-txt">购物车</span>
			    </a>
			    <a href="javascript:;" class="tabbar_item">
			        <span class="tabbar_icon tabbar_icon_geren">
			        </span>
			        <span class="tabbar-txt">我的</span>
			    </a>
			</footer>
	    </div>
	    <div class="mask" id="mask" style="display: none;">
	        <div class="address ar_lf_icon">当前位置： <span>深圳市龙岗区万汇大厦1606</span></div>
	        <div class="address_list">
	            <div class="list ar_lf_icon">
	                <div class="item">龙城广场地铁站A口</div>
	                <div class="item_right">
	                    <i class="right_icon"></i>
	                    <a href="javascript:;" class="shop_qu_btn shop_qu_btn_icon" onclick="alertMask()">去这里</a>
	                </div>
	            </div>
				<div class="list ar_lf_icon">
	                <div class="item">龙城广场地铁站A口</div>
	                <div class="item_right">
	                    <i class="right_icon"></i>
	                    <a href="javascript:;" class="shop_qu_btn shop_qu_btn_icon" onclick="alertMask()">去这里</a>
	                </div>
	            </div>
	        </div>
	        <div class="btn_box">
	            <a href="javascript:;" class="btn_block" onclick="alertMask()">取消</a>
	        </div>
	    </div>
    </div>
    <script type='text/javascript' src='js/public/jquery-3.3.1.min.js' charset='utf-8'></script>
    <script type='text/javascript' src='js/public/light7.min.js' charset='utf-8'></script>
    <script type='text/javascript' src='js/public/swiper.min.js' charset='utf-8'></script>
    <script type="text/javascript" src="http://develop2.01nnt.com/api/public/Wechat/js/jQuery.textSlider.js" charset="utf-8"></script>
    <script type="text/javascript">
	$(document).ready(function(){
        $("#scrollDiv").textSlider({line:1,speed:500,timer:3000});
    });
    var autoLb = true; //autoLb=true为开启自动轮播
    var autoLbtime = 4; //autoLbtime为轮播间隔时间（单位秒）
    var touch = true; //touch=true为开启触摸滑动
    var slideBt = true; //slideBt=true为开启滚动按钮


    var slideNub; //轮播图片数量
    window.onload = function() {
        slideNub = $(".img").length; //获取轮播图片数量
        for (i = 0; i < slideNub; i++) {
            $("#certify .img:eq(" + i + ")").attr("data-slide-imgId", i);
        }


        //根据轮播图片数量设定图片位置对应的class
        if (slideNub == 1) {
            for (i = 0; i < slideNub; i++) {
                $("#certify .img:eq(" + i + ")").addClass("img3");
            }
        }
        if (slideNub == 2) {
            for (i = 0; i < slideNub; i++) {
                $("#certify .img:eq(" + i + ")").addClass("img" + (i + 3));
            }
        }
        if (slideNub == 3) {
            for (i = 0; i < slideNub; i++) {
                $("#certify .img:eq(" + i + ")").addClass("img" + (i + 2));
            }
        }
        if (slideNub > 3 && slideNub < 6) {
            for (i = 0; i < slideNub; i++) {
                $("#certify .img:eq(" + i + ")").addClass("img" + (i + 1));
            }
        }
        if (slideNub >= 6) {
            for (i = 0; i < slideNub; i++) {
                if (i < 5) {
                    $("#certify .img:eq(" + i + ")").addClass("img" + (i + 1));
                } else {
                    $("#certify .img:eq(" + i + ")").addClass("img5");
                }
            }
        }


        //根据轮播图片数量设定轮播图按钮数量
        if (slideBt) {
            for (i = 1; i <= slideNub; i++) {
                $(".slide-bt").append("<span data-slide-bt='" + i + "' onclick='tz(" + i + ")'></span>");
            }
            $(".slide-bt").width(slideNub * 34);
            $(".slide-bt").css("margin-left", "-" + slideNub * 17 + "px");
        }


        //自动轮播
        if (autoLb) {
            setInterval(function() {
                right();
            }, autoLbtime * 1000);
        }


        if (touch) {
            k_touch();
        }
        slideLi();
        imgClickFy();
    }


    //右滑动
    function right() {
        var fy = new Array();
        for (i = 0; i < slideNub; i++) {
            fy[i] = $("#certify .img[data-slide-imgId=" + i + "]").attr("class");
        }
        for (i = 0; i < slideNub; i++) {
            if (i == 0) {
                $("#certify .img[data-slide-imgId=" + i + "]").attr("class", fy[slideNub - 1]);
            } else {
                $("#certify .img[data-slide-imgId=" + i + "]").attr("class", fy[i - 1]);
            }
        }
        imgClickFy();
        slideLi();

    }


    //左滑动
    function left() {
        var fy = new Array();
        for (i = 0; i < slideNub; i++) {
            fy[i] = $("#certify .img[data-slide-imgId=" + i + "]").attr("class");
        }
        for (i = 0; i < slideNub; i++) {
            if (i == (slideNub - 1)) {
                $("#certify .img[data-slide-imgId=" + i + "]").attr("class", fy[0]);
            } else {
                $("#certify .img[data-slide-imgId=" + i + "]").attr("class", fy[i + 1]);
            }
        }
        imgClickFy();
        slideLi();
    }


    //轮播图片左右图片点击翻页
    function imgClickFy() {
        $("#certify .img").removeAttr("onclick");
        $("#certify .img2").attr("onclick", "left()");
        $("#certify .img4").attr("onclick", "right()");
    }


    //修改当前最中间图片对应按钮选中状态
    function slideLi() {
        var slideList = parseInt($("#certify .img3").attr("data-slide-imgId")) + 1;
        $(".slide-bt span").removeClass("on");
        $(".slide-bt span[data-slide-bt=" + slideList + "]").addClass("on");
    }


    //轮播按钮点击翻页
    function tz(id) {
        var tzcs = id - (parseInt($("#certify .img3").attr("data-slide-imgId")) + 1);
        if (tzcs > 0) {
            for (i = 0; i < tzcs; i++) {
                setTimeout(function() {
                    right();
                }, 1);
            }
        }
        if (tzcs < 0) {
            tzcs = (-tzcs);
            for (i = 0; i < tzcs; i++) {
                setTimeout(function() {
                    left();
                }, 1);
            }
        }
        slideLi();
    }


    //触摸滑动模块
    function k_touch() {
        var _start = 0,
            _end = 0,
            _content = document.getElementById("certify");
        _content.addEventListener("touchstart", touchStart, false);
        _content.addEventListener("touchmove", touchMove, false);
        _content.addEventListener("touchend", touchEnd, false);

        function touchStart(event) {
            var touch = event.targetTouches[0];
            _start = touch.pageX;
        }

        function touchMove(event) {
            var touch = event.targetTouches[0];
            _end = (_start - touch.pageX);
        }

        function touchEnd(event) {
            if (_end < -100) {
                left();
                _end = 0;
            } else if (_end > 100) {
                right();
                _end = 0;
            }
        }
    }


    //热门推荐
    //暂时设计每个slide大小需要一致
	barwidth = 36 //导航粉色条的长度px
	tSpeed = 300000000000 //切换速度300ms
	var navSwiper = new Swiper('#nav', {
		slidesPerView: 2,
		freeMode: true,
		on: {
			init: function() {
				navSlideWidth = this.slides.eq(0).css('width'); //导航字数需要统一,每个导航宽度一致
				bar = this.$el.find('.bar')
				bar.css('width', navSlideWidth)
				bar.transition(tSpeed)
				navSum = this.slides[this.slides.length - 1].offsetLeft //最后一个slide的位置
				clientWidth = parseInt(this.$wrapperEl.css('width')) //Nav的可视宽度
				navWidth = 0
				for (i = 0; i < this.slides.length; i++) {
					navWidth += parseInt(this.slides.eq(i).css('width'))
				}
				topBar = this.$el.parents('body').find('#top') //页头
			},
		},
	});
    </script>
  </body>
</html>
